<template>
    <div class="subheader py-2 py-lg-12 subheader-transparent" id="kt_subheader">
							<div class="container d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap">
								<div class="d-flex align-items-center flex-wrap mr-1">
									<div class="d-flex flex-column">
										<h2 class="text-white font-weight-bold my-2 mr-5">Payroll dan Penggajian</h2>
                                        
										<div class="d-flex align-items-center font-weight-bold my-2">
										</div>
									</div>
								</div>
							</div>
						</div>
    <div class="content d-flex flex-column flex-column-fluid" id="kt_content">
						<!--begin::Subheader-->
					
						<!--end::Subheader-->
						<!--begin::Entry-->
			<div class="d-flex flex-column-fluid">
							<!--begin::Container-->
							<div class="container mb-13">   
										<!--begin::Card-->
										<div class="card card-custom">
											<div class="card-body">
											
												<div class="container mb-14">
								<!--begin::Row-->
								<div class="row">
									<div class="col-xl-12">
										<!--begin::Nav Panel Widget 1-->
										<div class="card card-custom gutter-b">
											<!--begin::Body-->
											<div class="card-body">
												<!--begin::Nav Tabs-->
											<ul class="dashboard-tabs nav nav-pills nav-danger row row-paddingless m-0 p-0 flex-column flex-sm-row" role="tablist">
													<!--begin::Item-->
													<li class="nav-item d-flex col-sm flex-grow-1 flex-shrink-0 mr-3 mb-3 mb-lg-0">
														<a class="nav-link active border py-10 d-flex flex-grow-1 rounded flex-column align-items-center" data-toggle="pill" href="#forms_widget_tab_1">
															<span class="nav-icon py-2 w-auto">
																<span class="svg-icon svg-icon-3x">
																	<!--begin::Svg Icon | path:assets/media/svg/icons/Home/Library.svg-->
																	<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
																		<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                                        <rect x="0" y="0" width="24" height="24"/>
                                                                        <path d="M2,6 L21,6 C21.5522847,6 22,6.44771525 22,7 L22,17 C22,17.5522847 21.5522847,18 21,18 L2,18 C1.44771525,18 1,17.5522847 1,17 L1,7 C1,6.44771525 1.44771525,6 2,6 Z M11.5,16 C13.709139,16 15.5,14.209139 15.5,12 C15.5,9.790861 13.709139,8 11.5,8 C9.290861,8 7.5,9.790861 7.5,12 C7.5,14.209139 9.290861,16 11.5,16 Z" fill="#000000" opacity="0.3" transform="translate(11.500000, 12.000000) rotate(-345.000000) translate(-11.500000, -12.000000) "/>
                                                                        <path d="M2,6 L21,6 C21.5522847,6 22,6.44771525 22,7 L22,17 C22,17.5522847 21.5522847,18 21,18 L2,18 C1.44771525,18 1,17.5522847 1,17 L1,7 C1,6.44771525 1.44771525,6 2,6 Z M11.5,16 C13.709139,16 15.5,14.209139 15.5,12 C15.5,9.790861 13.709139,8 11.5,8 C9.290861,8 7.5,9.790861 7.5,12 C7.5,14.209139 9.290861,16 11.5,16 Z M11.5,14 C12.6045695,14 13.5,13.1045695 13.5,12 C13.5,10.8954305 12.6045695,10 11.5,10 C10.3954305,10 9.5,10.8954305 9.5,12 C9.5,13.1045695 10.3954305,14 11.5,14 Z" fill="#000000"/>
                                                                    </g>
																	</svg>
																	<!--end::Svg Icon-->
																</span>
															</span>
															<span class="nav-text font-size-lg py-2 font-weight-bold text-center">Penggajian</span>
														</a>
													</li>
													<!--end::Item-->
													<!--begin::Item-->
													<li class="nav-item d-flex col-sm flex-grow-1 flex-shrink-0 mr-3 mb-3 mb-lg-0">
														<a class="nav-link border py-10 d-flex flex-grow-1 rounded flex-column align-items-center" data-toggle="pill" href="#forms_widget_tab_2">
															<span class="nav-icon py-2 w-auto">
																<span class="svg-icon svg-icon-3x">
																	<!--begin::Svg Icon | path:assets/media/svg/icons/Layout/Layout-4-blocks.svg-->
																	<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
																		<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
																			<rect x="0" y="0" width="24" height="24" />
																			<rect fill="#000000" x="4" y="4" width="7" height="7" rx="1.5" />
																			<path d="M5.5,13 L9.5,13 C10.3284271,13 11,13.6715729 11,14.5 L11,18.5 C11,19.3284271 10.3284271,20 9.5,20 L5.5,20 C4.67157288,20 4,19.3284271 4,18.5 L4,14.5 C4,13.6715729 4.67157288,13 5.5,13 Z M14.5,4 L18.5,4 C19.3284271,4 20,4.67157288 20,5.5 L20,9.5 C20,10.3284271 19.3284271,11 18.5,11 L14.5,11 C13.6715729,11 13,10.3284271 13,9.5 L13,5.5 C13,4.67157288 13.6715729,4 14.5,4 Z M14.5,13 L18.5,13 C19.3284271,13 20,13.6715729 20,14.5 L20,18.5 C20,19.3284271 19.3284271,20 18.5,20 L14.5,20 C13.6715729,20 13,19.3284271 13,18.5 L13,14.5 C13,13.6715729 13.6715729,13 14.5,13 Z" fill="#000000" opacity="0.3" />
																		</g>
																	</svg>
																	<!--end::Svg Icon-->
																</span>
															</span>
															<span class="nav-text font-size-lg py-2 font-weight-bolder text-center">Management Tunjangan</span>
														</a>
													</li>
												
													<li class="nav-item d-flex col-sm flex-grow-1 flex-shrink-0 mr-3 mb-3 mb-lg-0">
														<a class="nav-link border py-10 d-flex flex-grow-1 rounded flex-column align-items-center" data-toggle="pill" href="#forms_widget_tab_3">
															<span class="nav-icon py-2 w-auto">
																<span class="svg-icon svg-icon-3x">
																	<!--begin::Svg Icon | path:assets/media/svg/icons/Media/Equalizer.svg-->
																	<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
																		<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
																			<rect x="0" y="0" width="24" height="24" />
																			<rect fill="#000000" opacity="0.3" x="13" y="4" width="3" height="16" rx="1.5" />
																			<rect fill="#000000" x="8" y="9" width="3" height="11" rx="1.5" />
																			<rect fill="#000000" x="18" y="11" width="3" height="9" rx="1.5" />
																			<rect fill="#000000" x="3" y="13" width="3" height="7" rx="1.5" />
																		</g>
																	</svg>
																	<!--end::Svg Icon-->
																</span>
															</span>
															<span class="nav-text font-size-lg py-2 font-weight-bolder text-center">Management Bonus</span>
														</a>
													</li>
													<!--end::Item-->
													<!--begin::Item-->
													<li class="nav-item d-flex col-sm flex-grow-1 flex-shrink-0 mr-3 mb-3 mb-lg-0">
														<a class="nav-link border py-10 d-flex flex-grow-1 rounded flex-column align-items-center" data-toggle="pill" href="#forms_widget_tab_4">
															<span class="nav-icon py-2 w-auto">
																<span class="svg-icon svg-icon-3x">
																	<!--begin::Svg Icon | path:assets/media/svg/icons/General/Shield-check.svg-->
																	<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
																		<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
																			<rect x="0" y="0" width="24" height="24" />
																			<path d="M4,4 L11.6314229,2.5691082 C11.8750185,2.52343403 12.1249815,2.52343403 12.3685771,2.5691082 L20,4 L20,13.2830094 C20,16.2173861 18.4883464,18.9447835 16,20.5 L12.5299989,22.6687507 C12.2057287,22.8714196 11.7942713,22.8714196 11.4700011,22.6687507 L8,20.5 C5.51165358,18.9447835 4,16.2173861 4,13.2830094 L4,4 Z" fill="#000000" opacity="0.3" />
																			<path d="M11.1750002,14.75 C10.9354169,14.75 10.6958335,14.6541667 10.5041669,14.4625 L8.58750019,12.5458333 C8.20416686,12.1625 8.20416686,11.5875 8.58750019,11.2041667 C8.97083352,10.8208333 9.59375019,10.8208333 9.92916686,11.2041667 L11.1750002,12.45 L14.3375002,9.2875 C14.7208335,8.90416667 15.2958335,8.90416667 15.6791669,9.2875 C16.0625002,9.67083333 16.0625002,10.2458333 15.6791669,10.6291667 L11.8458335,14.4625 C11.6541669,14.6541667 11.4145835,14.75 11.1750002,14.75 Z" fill="#000000" />
																		</g>
																	</svg>
																	<!--end::Svg Icon-->
																</span>
															</span>
															<span class="nav-text font-size-lg py-2 font-weight-bolder text-center">Management Golongan</span>
														</a>
													</li>
                                                    <li class="nav-item d-flex col-sm flex-grow-1 flex-shrink-0 mr-3 mb-3 mb-lg-0">
														<a class="nav-link border py-10 d-flex flex-grow-1 rounded flex-column align-items-center" data-toggle="pill" href="#forms_widget_tab_6">
															<span class="nav-icon py-2 w-auto">
																<span class="svg-icon svg-icon-3x">
																	<!--begin::Svg Icon | path:assets/media/svg/icons/General/Shield-check.svg-->
																	<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
																		 <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                                                                            <rect x="0" y="0" width="24" height="24"/>
                                                                            <path d="M11.1669899,4.49941818 L2.82535718,19.5143571 C2.557144,19.9971408 2.7310878,20.6059441 3.21387153,20.8741573 C3.36242953,20.9566895 3.52957021,21 3.69951446,21 L21.2169432,21 C21.7692279,21 22.2169432,20.5522847 22.2169432,20 C22.2169432,19.8159952 22.1661743,19.6355579 22.070225,19.47855 L12.894429,4.4636111 C12.6064401,3.99235656 11.9909517,3.84379039 11.5196972,4.13177928 C11.3723594,4.22181902 11.2508468,4.34847583 11.1669899,4.49941818 Z" fill="#000000" opacity="0.3"/>
                                                                            <rect fill="#000000" x="11" y="9" width="2" height="7" rx="1"/>
                                                                            <rect fill="#000000" x="11" y="17" width="2" height="2" rx="1"/>
                                                                        </g>
																	</svg>
																	<!--end::Svg Icon-->
																</span>
															</span>
															<span class="nav-text font-size-lg py-2 font-weight-bolder text-center">Potongan</span>
														</a>
													</li>
                                                    <li class="nav-item d-flex col-sm flex-grow-1 flex-shrink-0 mr-3 mb-3 mb-lg-0">
														<a class="nav-link border py-10 d-flex flex-grow-1 rounded flex-column align-items-center" data-toggle="pill" href="#forms_widget_tab_5">
															<span class="nav-icon py-2 w-auto">
																<span class="svg-icon svg-icon-3x">
																	<!--begin::Svg Icon | path:assets/media/svg/icons/General/Shield-check.svg-->
																	<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
																		<g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
																			<polygon points="0 0 24 0 24 24 0 24" />
																			<path d="M18,14 C16.3431458,14 15,12.6568542 15,11 C15,9.34314575 16.3431458,8 18,8 C19.6568542,8 21,9.34314575 21,11 C21,12.6568542 19.6568542,14 18,14 Z M9,11 C6.790861,11 5,9.209139 5,7 C5,4.790861 6.790861,3 9,3 C11.209139,3 13,4.790861 13,7 C13,9.209139 11.209139,11 9,11 Z" fill="#000000" fill-rule="nonzero" opacity="0.3" />
																			<path d="M17.6011961,15.0006174 C21.0077043,15.0378534 23.7891749,16.7601418 23.9984937,20.4 C24.0069246,20.5466056 23.9984937,21 23.4559499,21 L19.6,21 C19.6,18.7490654 18.8562935,16.6718327 17.6011961,15.0006174 Z M0.00065168429,20.1992055 C0.388258525,15.4265159 4.26191235,13 8.98334134,13 C13.7712164,13 17.7048837,15.2931929 17.9979143,20.2 C18.0095879,20.3954741 17.9979143,21 17.2466999,21 C13.541124,21 8.03472472,21 0.727502227,21 C0.476712155,21 -0.0204617505,20.45918 0.00065168429,20.1992055 Z" fill="#000000" fill-rule="nonzero" />
																		</g>
																	</svg>
																	<!--end::Svg Icon-->
																</span>
															</span>
															<span class="nav-text font-size-lg py-2 font-weight-bolder text-center">Riwayat Penggajian</span>
														</a>
													</li>
													<!--end::Item-->
													<!--begin::Item-->
													<!--end::Item-->
												</ul>
												<!--end::Nav Tabs-->
												<!--begin::Nav Content-->
												<div class="tab-content m-0 p-0">
												</div>
												<!--end::Nav Content-->
											</div>
											<!--end::Body-->
										</div>
                                        
										<!--begin::Nav Panel Widget 1-->
									</div>
                                    
								</div>
                                <div class="tab-content">
                                    <div class="card card-custom tab-pane show active" id="forms_widget_tab_1" role="tabpanel">
											<!--begin::Header-->
											<div class="card-header flex-wrap border-0 pt-6 pb-0">
												<h3 class="card-title align-items-start flex-column">
													<span class="card-label font-weight-bolder text-dark" >Buat Penggajian Pegawai</span>
                                                    <span class="text-muted mt-1 font-weight-bold font-size-sm" v-for="(data) in infopt" :key="data.id">Data Penggajian Karyawan di {{ data.nama_perusahaan }} </span>
												</h3>
                                                 <div class="card-toolbar">
													<div class="dropdown dropdown-inline" data-toggle="tooltip" title="" data-placement="left" data-original-title="Quick actions">
														<!--begin::Trigger Modal-->
														<a href="#" class="btn btn-success font-weight-bolder font-size-sm" aria-haspopup="true" @click="buatgaji()" aria-expanded="false" data-toggle="modal">Buat Gaji</a>
                                                    </div>
                                                </div>
												
											</div>
											<!--end::Header-->
											<!--begin::Body-->
											<div class="card-body">
												<!--begin::Search Form-->
												<!--begin::Search Form-->
												<div class="mb-10">
													<div class="row align-items-center">
														<div class="col-lg-12 col-xl-8">
															 <form>
															<div class="row align-items-center">
																<div class="col-md-4 my-2 my-md-0">
																	<div class="input-icon">
																		<input v-model="search2" type="text" class="form-control form-control-solid" placeholder="Search..."  />
																		<span>
																			<i class="flaticon2-search-1 text-muted"></i>
																		</span>
																	</div>
																</div>
																<div>
																	<div>
																	<a class="btn btn-light-primary px-6 font-weight-bold">Search</a>
																</div>
																</div>
															</div>
														  </form>
														</div>
													</div>
												</div>
												<!--end::Search Form-->
												<!--end: Search Form-->
												<!--begin::Datatable-->
												<div class="table-responsive">
													<table class="table table-head-custom table-vertical-center" id="kt_advance_table_widget_1 w-200">
                                                        <thead class="" >
                                                        <tr>
                                                            <th>Email</th>
                                                            <th>Periode</th>
                                                            <th>Jabatan</th>
                                                            <th>Total Gaji</th>
                                                            <th style="text-align: center;">Status</th>
                                                            <th style="text-align: center;">Action</th>
                                                        </tr>
                                                        </thead>
                                                         <tbody v-for="data in datagajipeg" :key="data.id">
                                                            <tr  v-if="data.status == 'Belum Diambil'">
                                                                    <td>{{ data.email }}</td>
                                                                    <td>
                                                                        {{ data.tanggal}}
                                                                    </td>
                                                                    <td> <span v-for="jab in detjabatan" :key="jab.id">
                                                                            <a v-if="data.id_jabatan == jab.id">{{jab.jabatan}}</a>
                                                                        </span>
                                                                    </td>
                                                                     <td>
                                                                        <span v-if="data.status == 'Belum Diambil'">
                                                                            <a v-for="tes in data.akhir" :key="tes.id">{{convertToRupiah(tes)}}</a>
                                                                        </span>
                                                                    </td>
                                                                    <td  style="text-align: center;">
                                                                         <span v-if="data.status == 'Belum Diambil'" class="badge badge-warning" style="color:white" >Belum Diambil</span>
                                                                    </td>
                                                                    <td style="text-align: center;">
                                                                        <span v-if="data.status == 'Sudah Diambil'">
                                                                          <a  @click.prevent="detailGaji(data.id)" class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 flaticon2-document" data-toggle="modal" >
                                                                          </a>
                                                                              <a  class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 far fa-trash-alt" @click.prevent="hapusgaji(data.id)">
                                                                          </a></span>
                                                                        <div v-if="data.status == 'Belum Diambil'">
                                                                             <a @click.prevent="detailGaji(data.id)" class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 flaticon2-document" data-toggle="modal" >
                                                                          </a>
                                                                          <a  class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 far fa-edit" data-toggle="modal" @click.prevent="modaledit(data, data.id)">
                                                                          </a>
                                                                           <a  class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 far fa-trash-alt" @click.prevent="hapusgaji(data.id)">
                                                                          </a>
                                                                        </div>
                                                                    </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>

                                                </div>
												<!--end::Datatable-->
											</div>
											<!--end::Body-->
										</div>
                                         <div class="card card-custom tab-pane" id="forms_widget_tab_2" role="tabpanel">
											<!--begin::Header-->
											<div class="card-header flex-wrap border-0 pt-6 pb-0">
												<h3 class="card-title align-items-start flex-column">
													<span class="card-label font-weight-bolder text-dark" >Management Tunjangan</span>
													<span class="text-muted mt-1 font-weight-bold font-size-sm" v-for="(data) in infopt" :key="data.id">Management Tunjangan di {{ data.nama_perusahaan }}</span>
												</h3>
                                                 <div class="card-toolbar">
													<div class="dropdown dropdown-inline" data-toggle="tooltip" title="" data-placement="left" data-original-title="Quick actions">
														<!--begin::Trigger Modal-->
														<a href="#" class="btn btn-success font-weight-bolder font-size-sm" aria-haspopup="true" aria-expanded="false" data-toggle="modal"  @click="showModal()">Tambah</a>
                                                    </div>
                                                </div>
												
											</div>
											<!--end::Header-->
											<!--begin::Body-->
											<div class="card-body">
												<!--begin::Search Form-->
												<!--begin::Search Form-->
												<div class="mb-10">
													<div class="row align-items-center">
														<div class="col-lg-12 col-xl-8">
															 <form>
															<div class="row align-items-center">
																<div class="col-md-4 my-2 my-md-0">
																	<div class="input-icon">
																		<input v-model="searchtun" type="text" class="form-control form-control-solid" placeholder="Search..."  />
																		<span>
																			<i class="flaticon2-search-1 text-muted"></i>
																		</span>
																	</div>
																</div>
																<div>
																	<div>
																	<a class="btn btn-light-primary px-6 font-weight-bold">Search</a>
																</div>
																</div>
															</div>
														  </form>
														</div>
													</div>
												</div>
												<!--end::Search Form-->
												<!--end: Search Form-->
												<!--begin::Datatable-->
												<div class="table-responsive">
													<table class="table table-head-custom table-vertical-center" id="kt_advance_table_widget_1">
                                                        <thead class="" >
                                                        <tr>
                                                            <th>No</th>
                                                            <th>Jenis Tunjangan</th>
                                                            <th>Nominal</th>
                                                            <th style="text-align: center;">Action</th>
                                                        </tr>
                                                        </thead>
                                                         <tbody>
                                                             <tr v-for="(data,index) in tunjangan" :key="data.id">
                                                                    <td>{{index+1}} </td>
                                                                    <td>{{ data.jenis_tunjangan }}</td>
                                                                    <td>{{convertToRupiah (data.nominal) }}</td>
                                                                    <td style="text-align: center;">
                                                                          <a  class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 far fa-edit" data-toggle="modal" @click.prevent="showModalEdit(data)">
                                                                          </a>
                                                                           <a  class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 far fa-trash-alt" @click.prevent="hapustunjangan(data.id)">
                                                                          </a>
                                                                       
                                                                    </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>

                                                </div>
												<!--end::Datatable-->
											</div>
											<!--end::Body-->
										</div>
                                          <div class="card card-custom tab-pane" id="forms_widget_tab_3" role="tabpanel">
											<!--begin::Header-->
											<div class="card-header flex-wrap border-0 pt-6 pb-0">
												<h3 class="card-title align-items-start flex-column">
													<span class="card-label font-weight-bolder text-dark" >Management Bonus</span>
                                                    <span class="text-muted mt-1 font-weight-bold font-size-sm" v-for="(data) in infopt" :key="data.id">Management Bonus di {{ data.nama_perusahaan }}</span>
												</h3>
                                                 <div class="card-toolbar">
													<div class="dropdown dropdown-inline" data-toggle="tooltip" title="" data-placement="left" data-original-title="Quick actions">
														<!--begin::Trigger Modal-->
														<a href="#" class="btn btn-success font-weight-bolder font-size-sm" aria-haspopup="true" aria-expanded="false" @click="showModal2()" data-toggle="modal">Tambah</a>
                                                    </div>
                                                </div>
												
											</div>
											<!--end::Header-->
											<!--begin::Body-->
											<div class="card-body">
												<!--begin::Search Form-->
												<!--begin::Search Form-->
												<div class="mb-10">
													<div class="row align-items-center">
														<div class="col-lg-12 col-xl-8">
															 <form>
															<div class="row align-items-center">
																<div class="col-md-4 my-2 my-md-0">
																	<div class="input-icon">
																		<input v-model="searchbon" type="text" class="form-control form-control-solid" placeholder="Search..."  />
																		<span>
																			<i class="flaticon2-search-1 text-muted"></i>
																		</span>
																	</div>
																</div>
																<div>
																	<div>
																	<a class="btn btn-light-primary px-6 font-weight-bold">Search</a>
																</div>
																</div>
															</div>
														  </form>
														</div>
													</div>
												</div>
												<!--end::Search Form-->
												<!--end: Search Form-->
												<!--begin::Datatable-->
												<div class="table-responsive">
													<table class="table table-head-custom table-vertical-center" id="kt_advance_table_widget_1">
                                                        <thead class="" >
                                                        <tr>
                                                            <th>No</th>
                                                            <th>Jenis Bonus</th>
                                                            <th>Nominal</th>
                                                            <th style="text-align: center;">Action</th>
                                                        </tr>
                                                        </thead>
                                                         <tbody>
                                                             <tr v-for="(data,index) in bonus" :key="data.id">
                                                                    <td>{{index+1}} </td>
                                                                    <td>{{ data.jenis_bonus }}</td>
                                                                    <td>{{convertToRupiah (data.nominal) }}</td>
                                                                    <td style="text-align: center;">
                                                                          <a  class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 far fa-edit" data-toggle="modal" @click.prevent="showModalEdit2(data)">
                                                                          </a>
                                                                           <a  class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 far fa-trash-alt" @click.prevent="hapusbonus(data.id)">
                                                                          </a>
                                                                       
                                                                    </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>

                                                </div>
												<!--end::Datatable-->
											</div>
											<!--end::Body-->
										</div>
                                          <div class="card card-custom tab-pane" id="forms_widget_tab_4" role="tabpanel">
											<!--begin::Header-->
											<div class="card-header flex-wrap border-0 pt-6 pb-0">
												<h3 class="card-title align-items-start flex-column">
													<span class="card-label font-weight-bolder text-dark" >Management Golongan</span>
                                                    <span class="text-muted mt-1 font-weight-bold font-size-sm" v-for="(data) in infopt" :key="data.id">Management Golongan di {{ data.nama_perusahaan }}</span>
												</h3>
                                                 <div class="card-toolbar">
													<div class="dropdown dropdown-inline" data-toggle="tooltip" title="" data-placement="left" data-original-title="Quick actions">
														<!--begin::Trigger Modal-->
														<a href="#" class="btn btn-success font-weight-bolder font-size-sm" aria-haspopup="true" aria-expanded="false" @click="showModal3()" data-toggle="modal">Tambah</a>
                                                    </div>
                                                </div>
												
											</div>
											<!--end::Header-->
											<!--begin::Body-->
											<div class="card-body">
												<!--begin::Search Form-->
												<!--begin::Search Form-->
												<div class="mb-10">
													<div class="row align-items-center">
														<div class="col-lg-12 col-xl-8">
															 <form>
															<div class="row align-items-center">
																<div class="col-md-4 my-2 my-md-0">
																	<div class="input-icon">
																		<input v-model="searchgol" type="text" class="form-control form-control-solid" placeholder="Search..."  />
																		<span>
																			<i class="flaticon2-search-1 text-muted"></i>
																		</span>
																	</div>
																</div>
																<div>
																	<div>
																	<a class="btn btn-light-primary px-6 font-weight-bold">Search</a>
																</div>
																</div>
															</div>
														  </form>
														</div>
													</div>
												</div>
												<!--end::Search Form-->
												<!--end: Search Form-->
												<!--begin::Datatable-->
												<div class="table-responsive">
													<table class="table table-head-custom table-vertical-center" id="kt_advance_table_widget_1">
                                                        <thead class="" >
                                                        <tr>
                                                            <th>No</th>
                                                            <th>Golongan</th>
                                                            <th>Pendidikan</th>
                                                            <th>Nominal</th>
                                                            <th style="text-align: center;">Action</th>
                                                        </tr>
                                                        </thead>
                                                         <tbody>
                                                            <tr v-for="(data,index) in golongan" :key="data.id">
                                                                    <td>{{index+1}} </td>
                                                                    <td>{{ data.golongan }}</td>
                                                                    <td>{{ data.pendidikan }}</td>
                                                                    <td>{{convertToRupiah (data.nominal) }}</td>
                                                                   
                                                                    <td style="text-align: center;">
                                                                          <a  class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 far fa-edit" data-toggle="modal" @click.prevent="showModalEdit3(data)">
                                                                          </a>
                                                                           <a  class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 far fa-trash-alt" @click.prevent="hapusgolongan(data.id)">
                                                                          </a>
                                                                       
                                                                    </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>

                                                </div>
												<!--end::Datatable-->
											</div>
											<!--end::Body-->
										</div>
                                           <div class="card card-custom tab-pane show" id="forms_widget_tab_6" role="tabpanel">
											<!--begin::Header-->
											<div class="card-header flex-wrap border-0 pt-6 pb-0">
												<h3 class="card-title align-items-start flex-column">
													<span class="card-label font-weight-bolder text-dark" >Management Potongan Penggajian</span>
                                                    <span class="text-muted mt-1 font-weight-bold font-size-sm" v-for="(data) in infopt" :key="data.id">Potongan Gaji di {{ data.nama_perusahaan }}</span>
												</h3>
                                                <div class="card-toolbar">
													<div class="dropdown dropdown-inline" data-toggle="tooltip" title="" data-placement="left" data-original-title="Quick actions">
														<!--begin::Trigger Modal-->
														<a href="#" class="btn btn-success font-weight-bolder font-size-sm" aria-haspopup="true" aria-expanded="false" data-toggle="modal"  @click="showModal4()">Tambah</a>
                                                    </div>
                                                </div>
												
											</div>
											<!--end::Header-->
											<!--begin::Body-->
											<div class="card-body">
												<!--begin::Search Form-->
												<!--begin::Search Form-->
												<div class="mb-10">
													<div class="row align-items-center">
														<div class="col-lg-12 col-xl-8">
															 <form>
															<div class="row align-items-center">
																<div class="col-md-4 my-2 my-md-0">
																	<div class="input-icon">
																		<input v-model="searchpot" type="text" class="form-control form-control-solid" placeholder="Search..."  />
																		<span>
																			<i class="flaticon2-search-1 text-muted"></i>
																		</span>
																	</div>
																</div>
																<div>
																	<div>
																	<a class="btn btn-light-primary px-6 font-weight-bold">Search</a>
																</div>
																</div>
															</div>
														  </form>
														</div>
													</div>
												</div>
												<!--end::Search Form-->
												<!--end: Search Form-->
												<!--begin::Datatable-->
												<div class="table-responsive">
													<table class="table table-head-custom table-vertical-center" id="kt_advance_table_widget_1">
                                                        <thead class="" >
                                                        <tr>
                                                            <th>No</th>
                                                            <th>Potongan</th>
                                                            <th>Nominal Potongan</th>
                                                            <th style="text-align: center;">Action</th>
                                                        </tr>
                                                        </thead>
                                                         <tbody>
                                                             <tr v-for="(data,index) in potongan" :key="data.id">
                                                                    <td>{{index+1}} </td>
                                                                    <td>{{ data.jenis_potongan }}</td>
                                                                    <td>{{convertToRupiah (data.nominal) }}</td>
                                                                   
                                                                    <td style="text-align: center;">
                                                                          <a  class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 far fa-edit" data-toggle="modal" @click.prevent="showModalEdit4(data)">
                                                                          </a>
                                                                           <a  class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 far fa-trash-alt" @click.prevent="hapuspotongan(data.id)">
                                                                          </a>
                                                                       
                                                                    </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>

                                                </div>
												<!--end::Datatable-->
											</div>
											<!--end::Body-->
										</div>
                                           <div class="card card-custom tab-pane show" id="forms_widget_tab_5" role="tabpanel">
											<!--begin::Header-->
											<div class="card-header flex-wrap border-0 pt-6 pb-0">
												<h3 class="card-title align-items-start flex-column">
													<span class="card-label font-weight-bolder text-dark" >Riwayat Penggajian Pegawai</span>
                                                    <span class="text-muted mt-1 font-weight-bold font-size-sm" v-for="(data) in infopt" :key="data.id">Data Riwayat Penggajian Karyawan di {{ data.nama_perusahaan }} </span>
												</h3>
												
											</div>
											<!--end::Header-->
											<!--begin::Body-->
											<div class="card-body">
												<!--begin::Search Form-->
												<!--begin::Search Form-->
												<div class="mb-10">
													<div class="row align-items-center">
														<div class="col-lg-12 col-xl-8">
															 <form>
															<div class="row align-items-center">
																<div class="col-md-4 my-2 my-md-0">
																	<div class="input-icon">
																		<input v-model="search" type="text" class="form-control form-control-solid" placeholder="Search..."  />
																		<span>
																			<i class="flaticon2-search-1 text-muted"></i>
																		</span>
																	</div>
																</div>
																<div>
																	<div>
																	<a class="btn btn-light-primary px-6 font-weight-bold">Search</a>
																</div>
																</div>
															</div>
														  </form>
														</div>
													</div>
												</div>
												<!--end::Search Form-->
												<!--end: Search Form-->
												<!--begin::Datatable-->
												<div class="table-responsive">
													<table class="table table-head-custom table-vertical-center" id="kt_advance_table_widget_1">
                                                        <thead class="" >
                                                        <tr>
                                                            <th>Email</th>
                                                            <th>Periode</th>
                                                            <th>Jabatan</th>
                                                            <th>Total Gaji</th>
                                                            <th style="text-align: center;">Status</th>
                                                            <th style="text-align: center;">Action</th>
                                                        </tr>
                                                        </thead>
                                                         <tbody v-for="(data) in riwayatgaji" :key="data.id">
                                                            <tr v-if="data.status == 'Sudah Diambil'">
                                                                    <td>{{ data.email }}</td>
                                                                    <td>
                                                                        {{ data.tanggal_ambil}}
                                                                    </td>
                                                                    <td> <span v-for="jab in detjabatan" :key="jab.id">
                                                                            <a v-if="data.id_jabatan == jab.id">{{jab.jabatan}}</a>
                                                                        </span>
                                                                    </td>
                                                                     <td>
                                                                        {{convertToRupiah(data.gaji_bersih)}}
                                                                    </td>
                                                                    <td  style="text-align: center;">
                                                                         <span class="badge badge-success" >Sudah Diambil</span>
                                                                    </td>
                                                                    <td style="text-align: center;">
                                                                        <span>
                                                                          <a  @click.prevent="getriwayatdetail(data.id)" class="btn btn-sm btn-default btn-text-primary btn-hover-primary btn-icon mr-2 flaticon2-document" data-toggle="modal" >
                                                                          </a></span>
                                                                         
                                                                    </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>

                                                </div>
												<!--end::Datatable-->
											</div>
											<!--end::Body-->
										</div>
                                </div>
                                
							</div>
                            
												<!--end::Datatable-->
											</div>
											<!--end::Body-->
										</div>
										<!--end::Card-->
									</div>
									<!--end::Content-->
								</div>
								<!--end::Teachers-->
							</div>
							<!--end::Container-->

<div class="modal fade" id="buatgaji" tabindex="-1" role="dialog" aria-labelledby="staticBackdrop" aria-hidden="true">
															<div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-xl" role="document">
																<div class="modal-content">
																	<div class="modal-header">
                                                                        <h5 class="modal-title" v-show="!statusmodal" id="buatgaji">Buat Gaji Pegawai</h5>
																		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																			<i aria-hidden="true" class="ki ki-close" @click="closeModalgaji()"></i>
																		</button>
																	</div>
																	<div class="modal-body ">
                                                                        <form @submit="submitgaji()">
                                                                        <div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Email Pegawai</label>
																					<div class="col-lg-9 col-xl-6">
																						  <select class="form-control form-control-lg form-control-solid" v-model="form.email">
                                                                                        <option v-for="data in filteremail" :key="data.email" :selected="data.email == form.email ? selected : null" :value="data.email">{{data.email}}</option>
                                                                                    </select>
																					</div>
																				</div>
																				<div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Jabatan</label>
																					<div class="col-lg-9 col-xl-6">
																						  <select class="form-control form-control-lg form-control-solid" v-model="form.id_jabatan">
                                                                                        <option v-for="data in detjabatan" :key="data.id" :selected="data.id == form.id_jabatan ? selected : null" :value="data.id">{{data.jabatan}}: {{convertToRupiah(data.gaji)}}</option>
                                                                                    </select>
																					</div>
																				</div>
                                                                                <div class="separator separator-dashed my-10"></div>
                                                        <div class="form-group row">
														<label class="col-xl-3 col-lg-3 text-right col-form-label">Tambah Tunjangan Pegawai</label>
														<div class="col-9 col-form-label">
															<div class="checkbox-list">
																<label class="checkbox" v-for="data in tunjangan" :key="data.id">
																<input type="checkbox" v-model="gajiMultiple" :value="data.id" @click="select" @change="select"/>
                                                                                        <span value={{form.id_tunjangan}}></span>
                                                                                        {{data.jenis_tunjangan}} : {{convertToRupiah (data.nominal) }}</label>
																
																
															</div>
														</div>
													</div>
                                                     <span class="col-xl-3 col-lg-3 text-right text-primary">*Jika Pegawai Tidak Memiliki Tunjangan Harap Membuat Tunjangan Dengan Nominal Rp 0</span>
                                                     
                                                                        
                                                                            <div class="separator separator-dashed my-10"></div>
                                                        <div class="form-group row">
														<label class="col-xl-3 col-lg-3 text-right col-form-label">Tambah Bonus Pegawai</label>
														<div class="col-9 col-form-label">
															<div class="checkbox-list">
																<label class="checkbox" v-for="data in bonus" :key="data.id">
																<input type="checkbox" v-model="bonusMultiple" :value="data.id" @click="select" @change="select"/>
                                                                                        <span></span>
                                                                                        {{data.jenis_bonus}} : {{convertToRupiah (data.nominal) }}</label>
																
																
															</div>
														</div>
													</div>
                                                    <span class="col-xl-3 col-lg-3 text-right text-primary">*Jika Pegawai Tidak Memiliki Bonus Harap Membuat Bonus Dengan Nominal Rp 0</span>
                                                                            <div class="separator separator-dashed my-10"></div>
                                                        <div class="form-group row">
														<label class="col-xl-3 col-lg-3 text-right col-form-label">Tambah Potongan Pegawai</label>
														<div class="col-9 col-form-label">
															<div class="checkbox-list">
																<label class="checkbox" v-for="data in potongan" :key="data.id">
																 <input type="checkbox" v-model="potonganMultiple" :value="data.id" @click="select" @change="select"/>
                                                                                        <span></span>
                                                                                        {{data.jenis_potongan}} : {{convertToRupiah (data.nominal) }}</label>
																
																
															</div>
														</div>
													</div>
                                                    <span class="col-xl-3 col-lg-3 text-right text-primary">*Jika Pegawai Tidak Memiliki Potongan Harap Membuat Potongan Dengan Nominal Rp 0</span>
																	</form>
																	</div>
																	<div class="modal-footer">
                                                                        <button type="submit"   @click="submitgaji()"  class="btn btn-primary font-weight-bold">Buat Gaji</button>
                                                                        <button type="button"  data-dismiss="modal" @click="closeModalgaji()" class="btn btn-primary font-weight-bold">Batal</button>
																	</div>
																</div>
															</div>
														</div>
<div class="modal fade" id="editgaji" tabindex="-1" role="dialog" aria-labelledby="staticBackdrop" aria-hidden="true">
															<div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-xl" role="document">
																<div class="modal-content">
																	<div class="modal-header">
                                                                        <h5 class="modal-title" id="editgaji">Edit Gaji Pegawai</h5>
																		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																			<i aria-hidden="true" class="ki ki-close" @click="closegajiedit()"></i>
																		</button>
																	</div>
																	<div class="modal-body ">
                                                                        <form @submit="submiteditgaji()">
                                                        <div class="form-group row">
														<label class="col-xl-3 col-lg-3 text-right col-form-label">Edit Tunjangan Pegawai</label>
														<div class="col-9 col-form-label">
															<div class="checkbox-list">
																<label class="checkbox" v-for="data in tunjangan" :key="data.id">
																<input type="checkbox" v-model="gajiMultiple" :value="parseInt(data.id)" @click="select" @change="select"/>
                                                                                        <span value={{form.id_tunjangan}}></span>
                                                                                        {{data.jenis_tunjangan}} : {{convertToRupiah (data.nominal) }}</label>
																
																
															</div>
														</div>
													</div>
                                                    <span class="col-xl-3 col-lg-3 text-right text-primary">*Jika Pegawai Tidak Memiliki Tunjangan Harap Membuat Tunjangan Dengan Nominal Rp 0</span>
                                                                        
                                                                            <div class="separator separator-dashed my-10"></div>
                                                        <div class="form-group row">
														<label class="col-xl-3 col-lg-3 text-right col-form-label">Edit Bonus Pegawai</label>
														<div class="col-9 col-form-label">
															<div class="checkbox-list">
																<label class="checkbox" v-for="data in bonus" :key="data.id">
																<input type="checkbox" v-model="bonusMultiple" :value="parseInt(data.id)" @click="select" @change="select"/>
                                                                                        <span></span>
                                                                                        {{data.jenis_bonus}} : {{convertToRupiah (data.nominal) }}</label>
																
																
															</div>
														</div>
													</div>
                                                    <span class="col-xl-3 col-lg-3 text-right text-primary">*Jika Pegawai Tidak Memiliki Bonus Harap Membuat Bonus Dengan Nominal Rp 0</span>
                                                                            <div class="separator separator-dashed my-10"></div>
                                                        <div class="form-group row">
														<label class="col-xl-3 col-lg-3 text-right col-form-label">Edit Potongan Pegawai</label>
														<div class="col-9 col-form-label">
															<div class="checkbox-list">
																<label class="checkbox" v-for="data in potongan" :key="data.id">
																 <input type="checkbox" v-model="potonganMultiple" :value="parseInt(data.id)" @click="select" @change="select"/>
                                                                                        <span></span>
                                                                                        {{data.jenis_potongan}} : {{convertToRupiah (data.nominal) }}</label>
																
																
															</div>
														</div>
													</div>
                                                    <span class="col-xl-3 col-lg-3 text-right text-primary">*Jika Pegawai Tidak Memiliki Potongan Harap Membuat Potongan Dengan Nominal Rp 0</span>
																	</form>
																	</div>
																	<div class="modal-footer">
                                                                        <button type="submit"   @click="submiteditgaji()"  class="btn btn-primary font-weight-bold">Buat Gaji</button>
                                                                        <button type="button"  data-dismiss="modal" @click="closegajiedit()" class="btn btn-primary font-weight-bold">Batal</button>
																	</div>
																</div>
															</div>
														</div>
<div class="modal fade" id="detailgaji" tabindex="-1" role="dialog" aria-labelledby="staticBackdrop" aria-hidden="true">
															<div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-md" role="document">
																<div class="modal-content">
																	<div class="modal-header">
                                                                        <h5 class="modal-title" id="detailgaji">Detail Gaji Pegawai</h5>
																		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																			<i aria-hidden="true" class="ki ki-close" @click="closeDetGaji()"></i>
																		</button>
																	</div>
																	<div class="modal-body">
                                                                        <h5 class="modal-title" id="detailgaji" v-for="(data) in detgaji" :key="data.id">Detail Penggajian <a style="font-weight:bolder">{{data.email}}</a></h5>
                                                                        <br>
																		<div class="table-responsive">
													<table class="table table-bordered"  v-for="(data) in detgaji" :key="data.id">
                                                        <thead class="" >
                                                        
                                                        <tr>
                                                            <th>Jenis</th>
                                                            <th class="text-right">Nominal</th>
                                                        </tr>
                                                        </thead>
                                                        <tr>
                                                            <td>Gaji Pokok</td>
                                                             <td class="text-right" v-for="jabgaji in data.totjab" :key="jabgaji.id">{{convertToRupiah(jabgaji)}}</td>
                                                        </tr>
                                                         <tr>
                                                           <td>
                                                                     <span v-for="tundet in data.dettun" :key="tundet.id">
                                                                            <li style="list-style:none;">{{tundet}}</li>
                                                                        </span>
                                                                </td> 
                                                                <td class="text-right">
                                                                     <span v-for="nomtun in data.nomdettun" :key="nomtun.id">
                                                                            <li style="list-style:none">{{convertToRupiah(nomtun)}}</li>
                                                                        </span>
                                                                </td> 
                                                        </tr>
                                                        <tr>
                                                             <td>
                                                                     <span v-for="bondet in data.detbon" :key="bondet.id">
                                                                            <li style="list-style:none;">{{bondet}}</li>
                                                                        </span>
                                                                </td> 
                                                        
                                                                <td class="text-right">
                                                                     <span v-for="nomibon in data.nombon" :key="nomibon.id">
                                                                            <li style="list-style:none">{{convertToRupiah(nomibon)}}</li>
                                                                        </span>
                                                                </td> 
                                                        </tr>
                                                       
                                                        <thead class="" >
                                                        <tr>
                                                            <th>Sub Total</th>
                                                             <th class="text-right" v-for="sub in data.subtotal" :key="sub.id">{{convertToRupiah(sub)}}</th>
                                                        </tr>
                                                        </thead>
                                                        <tr>
                                                             <td>
                                                                     <span v-for="potdet in data.detpot" :key="potdet.id">
                                                                            <li style="list-style:none;">{{potdet}}</li>
                                                                        </span>
                                                                </td> 
                                                                <td class="text-right">
                                                                     <span v-for="nomipot in data.nompot" :key="nomipot.id">
                                                                            <li style="list-style:none">{{convertToRupiah(nomipot)}}</li>
                                                                        </span>
                                                                </td> 
                                                        </tr>
                                                            
                                                        
                                                         <thead class="" >
                                                        <tr>
                                                            <th>Total Potongan</th>
                                                            <th class="text-right">
                                                                     <span v-for="totapot in data.totpot" :key="totapot.id">
                                                                            <a>(-) {{convertToRupiah(totapot)}}</a>
                                                                        </span>
                                                            </th> 
                                                        </tr>
                                                        </thead>
                                                         <thead class="" >
                                                        <tr>
                                                            <th>Penerima Bersih</th>
                                                            <th class="text-right" v-for="totagaj in data.totalgaji" :key="totagaj.id">
                                                                <a>{{convertToRupiah(totagaj)}}</a>
                                                            </th>
                                                        </tr>
                                                        </thead>
                                                         <tbody>
                                                        </tbody>
                                                    </table>

                                                </div>
																	</div>
																	<div class="modal-footer">
                                                                        <button type="button"  data-dismiss="modal" @click="closeDetGaji()" class="btn btn-primary font-weight-bold">Tutup</button>
																	</div>
																</div>
															</div>
														</div>   
<div class="modal fade" id="detriwayat" tabindex="-1" role="dialog" aria-labelledby="staticBackdrop" aria-hidden="true">
															<div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-md" role="document">
																<div class="modal-content">
																	<div class="modal-header">
                                                                        <h5 class="modal-title" id="detriwayat">Detail Gaji Pegawai</h5>
																		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																			<i aria-hidden="true" class="ki ki-close" @click="closeriwayat()"></i>
																		</button>
																	</div>
																	<div class="modal-body">
                                                                        <h5 class="modal-title" id="detriwayat" v-for="(data) in detriwayat" :key="data.id">Detail Penggajian <a style="font-weight:bolder">{{data.email}}</a></h5>
                                                                        <br>
																		<div class="table-responsive">
													<table class="table table-bordered"  v-for="(data) in detriwayat" :key="data.id">
                                                        <thead class="" >
                                                        
                                                        <tr>
                                                            <th>Jenis</th>
                                                            <th class="text-right">Nominal</th>
                                                        </tr>
                                                        </thead>
                                                        <tr>
                                                            <td>Gaji Pokok</td>
                                                             <td class="text-right">{{convertToRupiah(data.gaji_pokok)}}</td>
                                                        </tr>
                                                         <tr>
                                                           <td>
                                                                     <span v-for="x in data.detritun" :key="x.id">
                                                                            <li style="list-style:none;">{{x}}</li>
                                                                        </span>
                                                                </td> 
                                                                <td class="text-right">
                                                                 <span v-for="x in data.detrinomtun" :key="x.id">
                                                                            <li style="list-style:none;">{{convertToRupiah(x)}}</li>
                                                                        </span>
                                                                </td> 
                                                        </tr>
                                                        <tr>
                                                             <td>
                                                                     <span v-for="x in data.detribon" :key="x.id">
                                                                            <li style="list-style:none;">{{x}}</li>
                                                                        </span>
                                                                </td> 
                                                        
                                                                <td class="text-right">
                                                                      <span v-for="x in data.detrinombon" :key="x.id">
                                                                            <li style="list-style:none;">{{convertToRupiah(x)}}</li>
                                                                        </span>
                                                                </td> 
                                                        </tr>
                                                       
                                                        <thead class="" >
                                                        <tr>
                                                            <th>Sub Total</th>
                                                             <th class="text-right">{{convertToRupiah(data.gaji_kotor)}}</th>
                                                        </tr>
                                                        </thead>
                                                        <tr>
                                                             <td>
                                                                     <span v-for="x in data.detripot" :key="x.id">
                                                                            <li style="list-style:none;">{{x}}</li>
                                                                        </span>
                                                                </td> 
                                                                <td class="text-right">
                                                                      <span v-for="x in data.detrinompot" :key="x.id">
                                                                            <li style="list-style:none;">{{convertToRupiah(x)}}</li>
                                                                        </span>
                                                                </td> 
                                                        </tr>
                                                            
                                                        
                                                         <thead class="" >
                                                        <tr>
                                                            <th>Total Potongan</th>
                                                            <th class="text-right">
                                                                     <span>
                                                                            <a>(-) {{convertToRupiah(data.total_potongan)}}</a>
                                                                        </span>
                                                            </th> 
                                                        </tr>
                                                        </thead>
                                                         <thead class="" >
                                                        <tr>
                                                            <th>Penerima Bersih</th>
                                                            <th class="text-right">
                                                                <a>{{convertToRupiah(data.gaji_bersih)}}</a>
                                                            </th>
                                                        </tr>
                                                        </thead>
                                                         <tbody>
                                                        </tbody>
                                                    </table>

                                                </div>
																	</div>
																	<div class="modal-footer">
                                                                        <button type="button"  data-dismiss="modal" @click="closeriwayat()" class="btn btn-primary font-weight-bold">Tutup</button>
																	</div>
																</div>
															</div>
														</div>                                                        

<div class="modal fade" id="tambahtunjangan" tabindex="-1" role="dialog" aria-labelledby="staticBackdrop" aria-hidden="true">
															<div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg" role="document">
																<div class="modal-content">
																	<div class="modal-header">
                                                                        <h5 class="modal-title" v-show="!statusmodal" id="tambahtunjangan">Tambah Tunjangan Pegawai</h5>
																		<h5 class="modal-title" v-show="statusmodal" id="tambahtunjangan">Edit Tunjangan Pegawai</h5>
																		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																			<i aria-hidden="true" class="ki ki-close" @click="closeModal()"></i>
																		</button>
																	</div>
																	<div class="modal-body">
																		<div >
																			<form @submit.prevent="statusmodal ? edittunjangan() : addtunjangan()">
																				<div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Jenis Tunjangan</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input v-model="form.jenis_tunjangan" placeholder="Masukan Jenis Tunjangan" type="text" class="form-control form-control-lg form-control-solid">
																					</div>
																				</div>
																				<div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Nominal</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input v-model="form.nominal" placeholder="Masukan angka saja" type="text" class="form-control form-control-lg form-control-solid">
																					</div>
																				</div>
																			</form>
																		</div>
																	</div>
																	<div class="modal-footer">
																		
																		<button type="submit" v-show="!statusmodal"  @click="addtunjangan()"  class="btn btn-primary font-weight-bold">Tambah</button>
                                                                        <button type="submit" v-show="statusmodal"   @click="edittunjangan()"  class="btn btn-primary font-weight-bold">Update</button>
                                                                        <button type="button"  data-dismiss="modal" @click="closeModal()" class="btn btn-primary font-weight-bold">Batal</button>
																	</div>
																</div>
															</div>
														</div>

 <div class="modal fade" id="tambahbonus" tabindex="-1" role="dialog" aria-labelledby="staticBackdrop" aria-hidden="true">
															<div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg" role="document">
																<div class="modal-content">
																	<div class="modal-header">
                                                                        <h5 class="modal-title" v-show="!statusmodal2" id="tambahbonus">Tambah Bonus</h5>
																		<h5 class="modal-title" v-show="statusmodal2" id="tambahbonus">Edit Bonus</h5>
																		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																			<i aria-hidden="true" class="ki ki-close" @click="closeModal2()"></i>
																		</button>
																	</div>
																	<div class="modal-body">
																		<div >
																			<form @submit.prevent="statusmodal2 ? editbonus() : addbonus()">
																				<div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Jenis Bonus</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input v-model="form.jenis_bonus" placeholder="Masukan Jenis Bonus" type="text" class="form-control form-control-lg form-control-solid">
																					</div>
																				</div>
																				<div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Nominal</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input v-model="form.nominal" placeholder="Masukan angka saja" type="text" class="form-control form-control-lg form-control-solid">
																					</div>
																				</div>
																			</form>
																		</div>
																	</div>
																	<div class="modal-footer">
																		
																		<button type="submit" v-show="!statusmodal2"  @click="addbonus()"  class="btn btn-primary font-weight-bold">Tambah</button>
                                                                        <button type="submit" v-show="statusmodal2"   @click="editbonus()"  class="btn btn-primary font-weight-bold">Update</button>
                                                                        <button type="button"  data-dismiss="modal" @click="closeModal2()" class="btn btn-primary font-weight-bold">Batal</button>
																	</div>
																</div>
															</div>
														</div>
<div class="modal fade" id="tambahgolongan" tabindex="-1" role="dialog" aria-labelledby="staticBackdrop" aria-hidden="true">
															<div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg" role="document">
																<div class="modal-content">
																	<div class="modal-header">
                                                                        <h5 class="modal-title" v-show="!statusmodal3" id="tambahgolongan">Tambah Golongan</h5>
																		<h5 class="modal-title" v-show="statusmodal3" id="tambahgolongan">Edit Golongan</h5>
																		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																			<i aria-hidden="true" class="ki ki-close" @click="closeModal3()"></i>
																		</button>
																	</div>
																	<div class="modal-body">
																		<div >
																			<form @submit.prevent="statusmodal2 ? editgolongan() : addgolongan()">
																				<div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Golongan</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input v-model="form.golongan" placeholder="Masukan Nama Golongan" type="text" class="form-control form-control-lg form-control-solid">
																					</div>
																				</div>
																				<div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Pendidikan</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input v-model="form.pendidikan" placeholder="Masukan Pendidikan Untuk Golongan" type="text" class="form-control form-control-lg form-control-solid">
																					</div>
																				</div>
                                                                                <div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Nominal</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input v-model="form.nominal" placeholder="Masukan Angka Saja" type="text" class="form-control form-control-lg form-control-solid">
																					</div>
																				</div>
																			</form>
																		</div>
																	</div>
																	<div class="modal-footer">
																		
																		<button type="submit" v-show="!statusmodal3"  @click="addgolongan()"  class="btn btn-primary font-weight-bold">Tambah</button>
                                                                        <button type="submit" v-show="statusmodal3"   @click="editgolongan()"  class="btn btn-primary font-weight-bold">Update</button>
                                                                        <button type="button"  data-dismiss="modal" @click="closeModal3()" class="btn btn-primary font-weight-bold">Batal</button>
																	</div>
																</div>
															</div>
														</div>
<div class="modal fade" id="tambahpotongan" tabindex="-1" role="dialog" aria-labelledby="staticBackdrop" aria-hidden="true">
															<div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg" role="document">
																<div class="modal-content">
																	<div class="modal-header">
                                                                        <h5 class="modal-title" v-show="!statusmodal3" id="tambahpotongan">Tambah Potongan</h5>
																		<h5 class="modal-title" v-show="statusmodal3" id="tambahpotongan">Edit Potongan</h5>
																		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																			<i aria-hidden="true" class="ki ki-close" @click="closeModal4()"></i>
																		</button>
																	</div>
																	<div class="modal-body">
																		<div >
																			<form @submit.prevent="statusmodal2 ? editpotongan() : addpotongan()">
																				<div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Potongan</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input v-model="form.jenis_potongan" placeholder="Masukan Jenis Potongan" type="text" class="form-control form-control-lg form-control-solid">
																					</div>
																				</div>
                                                                                <div class="form-group row">
																					<label class="col-xl-3 col-lg-3 text-right col-form-label">Nominal</label>
																					<div class="col-lg-9 col-xl-6">
																						 <input v-model="form.nominal" placeholder="Masukan Angka Saja" type="text" class="form-control form-control-lg form-control-solid">
																					</div>
																				</div>
																			</form>
																		</div>
																	</div>
																	<div class="modal-footer">
																		
																		<button type="submit" v-show="!statusmodal3"  @click="addpotongan()"  class="btn btn-primary font-weight-bold">Tambah</button>
                                                                        <button type="submit" v-show="statusmodal3"   @click="editpotongan()"  class="btn btn-primary font-weight-bold">Update</button>
                                                                        <button type="button"  data-dismiss="modal" @click="closeModal4()" class="btn btn-primary font-weight-bold">Batal</button>
																	</div>
																</div>
															</div>
														</div>                                                                                                                             


</template>


<script>

export default {
    name: "Payroll",
    data() {
        return {
            searchpot: '',
            searchtun: '',
            searchbon: '',
            searchgol: '',
            search2: '', 
            search: '',
            detritun: [],
            detrinomtun: [],
            detribon: [],
            detrinombon: [],
            detripot: [],
            detrinompot: [],
            detriwayat:[],
            riwayatgaji: [],
            subtotal: [],
            totjab: [],
            totalgaji: [],
            detpot: [],
            nompot: [],
            totpot: [],
            detbon: [],
            nombon: [],
            totbon: [],
            dettun : [],
            totun : [],
            nomdettun : [],
            akhir: [],
            nilai:[],
            bon: [],
            potong: [],
            cekbok:[],
            infopt:[],
            gajiMultiple: [],
            bonusMultiple: [],
            potonganMultiple: [],
            tunjangan:[],
            bonus:[],
            potongan:[],
            golongan:[],
            datagaji:[],
            detgaji: [],
            datagajipeg:[],
            detjabatan:[],
            infopt:[],
            detpegawai:[],
            datapegawai:[],
            statusmodal: false,
            statusmodal2: false,
            statusmodal3: false,
             form : new Form({
                id : "",
                email: "",
                id_jabatan: "",
                id_tunjangan : [],
                id_bonus : [],
                id_potongan : [],
            }),
            
            form : new Form({
                id : "",
                jenis_tunjangan : "",
                golongan : "",
                pendidikan : "",
                jenis_bonus : "",
                jenis_potongan : "",
                nominal : "",
            }),
            token: localStorage.getItem("token"),
            role: localStorage.getItem('role'),
        }
    },
    computed: {
    filteremail() {
        return this.datapegawai.filter(data => data.status == 'Aktif');
    },
    },
     watch: {
        search: function ()
            {
                this.searchriwayat(this.search)
                //  this.searchgaji(this.search2)
            },
        search2: function ()
            {
                this.searchgaji(this.search2)
            },
         searchtun: function ()
            {
                this.searchtunjangan(this.searchtun)
            },
         searchbon: function ()
            {
                this.searchgaji(this.searchbon)
            },
         searchgol: function ()
            {
                this.searchgolongan(this.searchgol)
            },
        searchpot: function ()
            {
                this.searchpotongan(this.searchpot)
            },               
        },
        
    methods:{
        select() {
            console.log(this.gajiMultiple)
            console.log(this.bonusMultiple)
            console.log(this.potonganMultiple)
        },
        format(time){
        return time.replace(/(?:0)?(\d+):(?:0)?(\d+).*/,'$1 Jam');
		},
        getdataPegawai(){
            this.$axios.get('/sanctum/csrf-cookie').then(response => {
            this.$axios.get('/api/sudahisi',{
                headers: {Authorization: "Bearer " + this.token},
            })
                .then(response => {
                    this.datapegawai = response.data.data;
                })
                .catch(function (error) {
                    console.error(error);
                });
        })
        },
        sumNumbers(numbers) {
            var sum = 0;
            for (let i = 0; i < numbers.length; i++) {
                var elements = numbers[i];
                sum = sum + elements;
            }
            return sum;
        },
         searchtunjangan(val) {
            if (val == "")
            {
                this.alltunjangan()
            }else {
                axios
                    .get('/api/searchtunjangan/'+ val , {
                        headers: {Authorization: "Bearer " + this.token},
                    })
                    .then((response) => {
                        this.tunjangan = response.data;
                    });
            }
        },
         searchbonus(val) {
            if (val == "")
            {
                this.allbonus()
            }else {
                axios
                    .get('/api/searchbonus/'+ val , {
                        headers: {Authorization: "Bearer " + this.token},
                    })
                    .then((response) => {
                        this.bonus = response.data;
                    });
            }
        },
         searchgolongan(val) {
            if (val == "")
            {
                this.allgolongan()
            }else {
                axios
                    .get('/api/searchgolongan/'+ val , {
                        headers: {Authorization: "Bearer " + this.token},
                    })
                    .then((response) => {
                        this.golongan = response.data;
                    });
            }
        },
         searchpotongan(val) {
            if (val == "")
            {
                this.allpotongan()
            }else {
                axios
                    .get('/api/searchpotongan/'+ val , {
                        headers: {Authorization: "Bearer " + this.token},
                    })
                    .then((response) => {
                        this.potongan = response.data;
                    });
            }
        },
        //GAJI
         searchriwayat(val) {
            if (val == "")
            {
                this.riwayat()
            }else {
                axios
                    .get('/api/searchriwayat/'+ val , {
                        headers: {Authorization: "Bearer " + this.token},
                    })
                    .then((response) => {
                        this.riwayatgaji = response.data;
                    });
            }
        },
        searchgaji(val) {
            if (val == "")
            {
                this.tampilgaji()
            }else {
                axios
                    .get('/api/searchgaji/'+ val , {
                        headers: {Authorization: "Bearer " + this.token},
                    })
                    .then((response) => {
                    this.datagajipeg = response.data.data;
                    // this.nilai = response.data.nominal;
                    this.nilai = response.data.tunjangan;
                    this.bon = response.data.bonus;
                    this.potong = response.data.potongan;
                    this.akhir = response.data.hasil;

                    for (let i = 0; i < this.nilai.length; i++) {
                        Object.assign(this.datagajipeg[i], { nilai: this.nilai[i] })
                    }
                    for (let i = 0; i < this.bon.length; i++) {
                        Object.assign(this.datagajipeg[i], { bon: this.bon[i] })
                    }
                    for (let i = 0; i < this.potong.length; i++) {
                        Object.assign(this.datagajipeg[i], { potong: this.potong[i] })
                    }
                    for (let i = 0; i < this.akhir.length; i++) {
                        Object.assign(this.datagajipeg[i], { akhir: this.akhir[i] })
                    }
                    });
            }
        },
          riwayat(){
            this.$axios.get('/sanctum/csrf-cookie').then(response => {
            this.$axios.get('/api/riwayatgaji',{
                headers: {Authorization: "Bearer " + this.token},
            })
                .then(response => {
                    this.riwayatgaji = response.data.data;
                })
                .catch(function (error) {
                    console.error(error);
                });
        })
        },
         tampilgaji(){
            this.$axios.get('/sanctum/csrf-cookie').then(response => {
            this.$axios.get('/api/allgaji',{
                headers: {Authorization: "Bearer " + this.token},
            })
                .then(response => {
                    this.datagajipeg = response.data.data;
                    this.nilai = response.data.tunjangan;
                    this.bon = response.data.bonus;
                    this.potong = response.data.potongan;
                    this.akhir = response.data.hasil;

                    for (let i = 0; i < this.nilai.length; i++) {
                        Object.assign(this.datagajipeg[i], { nilai: this.nilai[i] })
                    }
                    for (let i = 0; i < this.bon.length; i++) {
                        Object.assign(this.datagajipeg[i], { bon: this.bon[i] })
                    }
                    for (let i = 0; i < this.potong.length; i++) {
                        Object.assign(this.datagajipeg[i], { potong: this.potong[i] })
                    }
                    for (let i = 0; i < this.akhir.length; i++) {
                        Object.assign(this.datagajipeg[i], { akhir: this.akhir[i] })
                    }
                    
                   


                })
                .catch(function (error) {
                    console.error(error);
                });
        })
        },
        modaledit(data, id) {
           $("#editgaji").modal("show");
           this.idModal = id
           console.log(id)
           if(data.id_tunjangan.toString().includes(",")){
            this.gajiMultiple = []
            this.gajiMultiple = data.id_tunjangan.split(",")
           }else{
            this.gajiMultiple = []
            this.gajiMultiple.push(parseInt(data.id_tunjangan))
           }

            if(data.id_bonus.toString().includes(",")){
            this.bonusMultiple = []
            this.bonusMultiple = data.id_bonus.split(",")
           }else{
            this.bonusMultiple = []
            this.bonusMultiple.push(parseInt(data.id_bonus))
           }

            if(data.id_potongan.toString().includes(",")){
            this.potonganMultiple = []
            this.potonganMultiple = data.id_potongan.split(",")
           }else{
            this.potonganMultiple = []
            this.potonganMultiple.push(parseInt(data.id_potongan))
           }
        },
         closegajiedit() {
            this.form.reset();
            $("#editgaji").modal("hide");
        },
        closeriwayat() {
            this.form.reset();
            $("#detriwayat").modal("hide");
        },
        buatgaji(data, id) {
           $("#buatgaji").modal("show");
           this.form.fill(data)
        },
         closeDetGaji() {
            this.form.reset();
            $("#detailgaji").modal("hide");
        },
         submiteditgaji(){
            axios.post('/api/updategaji',
                {
                    id: parseInt(this.idModal),
                    id_tunjangan: this.gajiMultiple,
                    id_bonus: this.bonusMultiple,
                    id_potongan:this.potonganMultiple
                },
                {
                    headers: { Authorization: "Bearer " + this.token }
                }).then((response) => {
                if (response.data.success){
                    Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Data Berhasil Diupdate",
                        showConfirmButton: false,
                        timer: 1600,
                    }),
                     $("#editgaji").modal("hide");
                    this.tampilgaji();
                }else{
                    Swal.fire({
                        icon: "error",
                        title: "Gagal",
                        text: "Data Kurang Lengkap",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                }
            })
        },
        hapusgaji(id){
            this.$axios.get('/sanctum/csrf-cookie').then(response => {
            Swal.fire({
            title: 'Hapus Gaji Pegawai ?',
            text: "Anda tidak akan bisa mengembalikannya lagi!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#1BC5BD',
            cancelButtonColor: '',
            confirmButtonText: 'Hapus',
            cancelButtonText: 'Batal',
            }).then((result) => {
                 if (result.isConfirmed) {
                 axios.delete('/api/hapusgaji/'+id,  {
                headers: { Authorization: "Bearer " + this.token },
                },
                )
                  Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Menghapus Gaji Pegawai",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    };
           
                    this.tampilgaji()

            },

            )

            })
        },
        detailGaji(id){
            $('#detailgaji').modal('show')
            axios.get('/api/detailgaji/'+id,{
                headers: { Authorization: "Bearer " + this.token }
            }).then((response) => {
                this.detgaji = response.data.data
                //TUNJANGAN
                this.dettun = response.data.tunjangan;
                this.nomdettun = response.data.nominal;
                this.totun = response.data.arrtun;
                //BONUS
                this.detbon = response.data.bonus;
                this.nombon = response.data.nominal_bonus;
                this.totbon = response.data.arrbon;
                //POTONGAN
                this.detpot = response.data.potongan;
                this.nompot = response.data.nominal_potongan;
                this.totpot = response.data.arrpot;
                //TOTAL GAJI
                this.totalgaji = response.data.hasil;
                this.totjab = response.data.arrjab;

                this.subtotal = response.data.subtotal;
                //TUNJANGAN
                for (let i = 0; i < this.dettun.length; i++) {
                        Object.assign(this.detgaji[i], { dettun: this.dettun[i] })
                    }
                for (let i = 0; i < this.nomdettun.length; i++) {
                        Object.assign(this.detgaji[i], { nomdettun: this.nomdettun[i] })
                    }
                for (let i = 0; i < this.totun.length; i++) {
                        Object.assign(this.detgaji[i], { totun: this.totun[i] })
                    }    
                //BONUS
                for (let i = 0; i < this.detbon.length; i++) {
                        Object.assign(this.detgaji[i], { detbon: this.detbon[i] })
                    }
                for (let i = 0; i < this.nombon.length; i++) {
                        Object.assign(this.detgaji[i], { nombon: this.nombon[i] })
                    }
                for (let i = 0; i < this.totbon.length; i++) {
                        Object.assign(this.detgaji[i], { totbon: this.totbon[i] })
                    }    
                //POTONGAN
                for (let i = 0; i < this.detpot.length; i++) {
                        Object.assign(this.detgaji[i], { detpot: this.detpot[i] })
                    }
                for (let i = 0; i < this.nompot.length; i++) {
                        Object.assign(this.detgaji[i], { nompot: this.nompot[i] })
                    }
                for (let i = 0; i < this.totpot.length; i++) {
                        Object.assign(this.detgaji[i], { totpot: this.totpot[i] })
                    }
                //TOTAL GAJI
                for (let i = 0; i < this.totalgaji.length; i++) {
                        Object.assign(this.detgaji[i], { totalgaji: this.totalgaji[i] })
                    }
                for (let i = 0; i < this.totjab.length; i++) {
                        Object.assign(this.detgaji[i], { totjab: this.totjab[i] })
                    }
                  for (let i = 0; i < this.subtotal.length; i++) {
                        Object.assign(this.detgaji[i], { subtotal: this.subtotal[i] })
                    }   
    

            })
        },
          //Detail Riwayat
         getriwayatdetail(id){
            $('#detriwayat').modal('show')
            axios.get('/api/detriwayatgaji/'+id,{
                headers: { Authorization: "Bearer " + this.token }
            }).then((response) => {
                this.detriwayat = response.data.data
                //ssds
                this.detritun = response.data.tunjangan
                this.detrinomtun = response.data.nomtun
                this.detribon = response.data.bonus
                this.detrinombon = response.data.nombon
                this.detripot = response.data.potongan
                this.detrinompot = response.data.nompot

                    for (let i = 0; i < this.detritun.length; i++) {
                        Object.assign(this.detriwayat[i], { detritun: this.detritun[i] })
                    }   
                    for (let i = 0; i < this.detrinomtun.length; i++) {
                        Object.assign(this.detriwayat[i], { detrinomtun: this.detrinomtun[i] })
                    }
                    for (let i = 0; i < this.detribon.length; i++) {
                        Object.assign(this.detriwayat[i], { detribon: this.detribon[i] })
                    }   
                    for (let i = 0; i < this.detrinombon.length; i++) {
                        Object.assign(this.detriwayat[i], { detrinombon: this.detrinombon[i] })
                    }    
                    for (let i = 0; i < this.detripot.length; i++) {
                        Object.assign(this.detriwayat[i], { detripot: this.detripot[i] })
                    }   
                    for (let i = 0; i < this.detrinompot.length; i++) {
                        Object.assign(this.detriwayat[i], { detrinompot: this.detrinompot[i] })
                    }        
            })
        },
        submitgaji(){
             axios.post('/api/buatgaji',
                {
                    id: this.form.id,
                    email: this.form.email,
                    id_jabatan: this.form.id_jabatan,
                    id_tunjangan: this.gajiMultiple,
                    id_bonus: this.bonusMultiple,
                    id_potongan:this.potonganMultiple
                },
                {
                    headers: { Authorization: "Bearer " + this.token }
                }).then((response) => {
                if (response.data.success){
                    Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Membuat Gaji",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    this.form.reset();
                    $("#buatgaji").modal("hide");
                    this.tampilgaji()
                }else{
                    Swal.fire({
                        icon: "error",
                        title: "Gagal",
                        text: "Data Kurang Lengkap",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                }
            

           })
        },
        tampilpeg(id) {
            
            // this.detailPegawai(id);
            //   this.form.post('/api/buatgaji/'+id,{
            //     headers: { Authorization: "Bearer " + this.token }
            // }).then((response) => {
            //     this.datagaji = response.data.data
            // })
        },
        showgaji(id){
            // $("#buatgaji").modal("show");
            axios.get('/api/detailpegawai/'+id,{
                headers: { Authorization: "Bearer " + this.token }
            }).then((response) => {
                this.detpegawai = response.data.data
            })
        },
         closeModalgaji() {
            this.form.reset();
            $("#buatgaji").modal("hide");
        },
        allJabatan(){
             this.$axios.get('/sanctum/csrf-cookie').then(response => {
            this.$axios.get('/api/alljabatan',{
                headers: {Authorization: "Bearer " + this.token},
            })
                .then(response => {
                    this.detjabatan = response.data.data;
                })
                .catch(function (error) {
                    console.error(error);
                });
        })
        },
        //TUNJANGAN
         showModal() {
            this.statusmodal = false;
            this.form.reset();
            $("#tambahtunjangan").modal("show");
        },
        showModalEdit(data) {
            this.statusmodal = true;
            this.form.reset();
            $("#tambahtunjangan").modal("show");
            this.form.fill(data);
        },
        closeModal() {
            this.form.reset();
            $("#tambahtunjangan").modal("hide");
        },
        //BONUS
         showModal2() {
            this.statusmodal2 = false;
            this.form.reset();
            $("#tambahbonus").modal("show");
        },
        showModalEdit2(data) {
            this.statusmodal2 = true;
            this.form.reset();
            $("#tambahbonus").modal("show");
            this.form.fill(data);
        },
        closeModal2() {
            this.form.reset();
            $("#tambahbonus").modal("hide");
        },
        //GOLONGAN
        showModal3() {
            this.statusmodal3 = false;
            this.form.reset();
            $("#tambahgolongan").modal("show");
        },
        showModalEdit3(data) {
            this.statusmodal3 = true;
            this.form.reset();
            $("#tambahgolongan").modal("show");
            this.form.fill(data);
        },
        closeModal3() {
            this.form.reset();
            $("#tambahgolongan").modal("hide");
        },
         //POTONGAN
        showModal4() {
            this.statusmodal3 = false;
            this.form.reset();
            $("#tambahpotongan").modal("show");
        },
        showModalEdit4(data) {
            this.statusmodal3 = true;
            this.form.reset();
            $("#tambahpotongan").modal("show");
            this.form.fill(data);
        },
        closeModal4() {
            this.form.reset();
            $("#tambahpotongan").modal("hide");
        },

         getpt(){
            this.$axios.get('/sanctum/csrf-cookie').then(response => {
            this.$axios.get('/api/infopt',{
                headers: {Authorization: "Bearer " + this.token},
            })
                .then(response => {
                    this.infopt = response.data.data;
                })
                .catch(function (error) {
                    console.error(error);
                });
        })
        },
      
        //TUNJANGAN
        edittunjangan(){
        
              axios.post('/api/updatetunjangan',
                {
                    id: this.form.id,
                    jenis_tunjangan: this.form.jenis_tunjangan,
                    nominal: this.form.nominal,
                },
                {
                    headers: { Authorization: "Bearer " + this.token }
                }).then((response) => {
                if (response.data.success){
                    Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Update Tunjangan",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    this.form.reset();
                    $("#tambahtunjangan").modal("hide");
                    this.alltunjangan()
                }
            

           })
        },
        addtunjangan() {
            this.$axios.get('/sanctum/csrf-cookie').then(response => {
            this.form.post('/api/tambahtunjangan', {
                headers : { Authorization: "Bearer " + this.token },
            }).then((response) => {
                if (response.data.success){
                    Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Menambahkan Tunjangan",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    this.form.reset();
                    $('#tambahtunjangan').modal('hide')
                    this.alltunjangan()
                }
                    
                    }
                )
                    })
        },
         alltunjangan(){
            this.$axios.get('/sanctum/csrf-cookie').then(response => {
            this.$axios.get('/api/alltunjangan',{
                headers: {Authorization: "Bearer " + this.token},
            })
                .then(response => {
                    this.tunjangan = response.data.data;
                })
                .catch(function (error) {
                    console.error(error);
                });
        })
        },
         hapustunjangan(id){
            this.$axios.get('/sanctum/csrf-cookie').then(response => {
            Swal.fire({
            title: 'Hapus Tunjangan ?',
            text: "Anda tidak akan bisa mengembalikannya lagi!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#1BC5BD',
            cancelButtonColor: '',
            confirmButtonText: 'Hapus',
            cancelButtonText: 'Batal',
            }).then((result) => {
                 if (result.isConfirmed) {
                 axios.delete('/api/hapustunjangan/'+id,  {
                headers: { Authorization: "Bearer " + this.token },
                },
                )
                  Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Menghapus Tunjangan Pegawai",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    };
           
                    this.alltunjangan()

            },

            )

            })
        },
        //BONUS
        editbonus(){
        
              axios.post('/api/updatebonus',
                {
                    id: this.form.id,
                    jenis_bonus: this.form.jenis_bonus,
                    nominal: this.form.nominal,
                },
                {
                    headers: { Authorization: "Bearer " + this.token }
                }).then((response) => {
                if (response.data.success){
                    Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Update Bonus",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    this.form.reset();
                    $("#tambahbonus").modal("hide");
                    this.allbonus()
                }
            

           })
        },
        addbonus() {
            this.$axios.get('/sanctum/csrf-cookie').then(response => {
            this.form.post('/api/tambahbonus', {
                headers : { Authorization: "Bearer " + this.token },
            }).then((response) => {
                if (response.data.success){
                    Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Menambahkan Bonus",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    this.form.reset();
                    $('#tambahbonus').modal('hide')
                    this.allbonus()
                }
                    
                    }
                )
                    })
        },
         allbonus(){
            this.$axios.get('/sanctum/csrf-cookie').then(response => {
            this.$axios.get('/api/allbonus',{
                headers: {Authorization: "Bearer " + this.token},
            })
                .then(response => {
                    this.bonus = response.data.data;
                })
                .catch(function (error) {
                    console.error(error);
                });
        })
        },
         hapusbonus(id){
            this.$axios.get('/sanctum/csrf-cookie').then(response => {
            Swal.fire({
            title: 'Hapus Bonus ?',
            text: "Anda tidak akan bisa mengembalikannya lagi!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#1BC5BD',
            cancelButtonColor: '',
            confirmButtonText: 'Hapus',
            cancelButtonText: 'Batal',
            }).then((result) => {
                 if (result.isConfirmed) {
                 axios.delete('/api/hapusbonus/'+id,  {
                headers: { Authorization: "Bearer " + this.token },
                },
                )
                  Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Menghapus Bonus Pegawai",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    };
           
                    this.allbonus()

            },

            )

            })
        },
         //BONUS
        editpotongan(){
              axios.post('/api/updatepotongan',
                {
                    id: this.form.id,
                    jenis_potongan: this.form.jenis_potongan,
                    nominal: this.form.nominal,
                },
                {
                    headers: { Authorization: "Bearer " + this.token }
                }).then((response) => {
                if (response.data.success){
                    Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Update Akun Pegawai",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    this.form.reset();
                    $("#tambahpotongan").modal("hide");
                    this.allpotongan()
                }
            

           })
        },
        addpotongan() {
            this.$axios.get('/sanctum/csrf-cookie').then(response => {
            this.form.post('/api/tambahpotongan', {
                headers : { Authorization: "Bearer " + this.token },
            }).then((response) => {
                if (response.data.success){
                    Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Menambahkan Potongan",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    this.form.reset();
                    $('#tambahpotongan').modal('hide')
                    this.allpotongan()
                }
                    
                    }
                )
                    })
        },
         allpotongan(){
            this.$axios.get('/sanctum/csrf-cookie').then(response => {
            this.$axios.get('/api/allpotongan',{
                headers: {Authorization: "Bearer " + this.token},
            })
                .then(response => {
                    this.potongan = response.data.data;
                })
                .catch(function (error) {
                    console.error(error);
                });
        })
        },
         hapuspotongan(id){
            this.$axios.get('/sanctum/csrf-cookie').then(response => {
            Swal.fire({
            title: 'Hapus Potongan ?',
            text: "Anda tidak akan bisa mengembalikannya lagi!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#1BC5BD',
            cancelButtonColor: '',
            confirmButtonText: 'Hapus',
            cancelButtonText: 'Batal',
            }).then((result) => {
                 if (result.isConfirmed) {
                 axios.delete('/api/hapuspotongan/'+id,  {
                headers: { Authorization: "Bearer " + this.token },
                },
                )
                  Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Menghapus Potongan Pegawai",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    };
           
                    this.allpotongan()

            },

            )

            })
        },
        //GOLONGAN
        editgolongan(){
        
              axios.post('/api/updategolongan',
                {
                    id: this.form.id,
                    golongan: this.form.golongan,
                    pendidikan: this.form.pendidikan,
                    nominal: this.form.nominal,
                },
                {
                    headers: { Authorization: "Bearer " + this.token }
                }).then((response) => {
                if (response.data.success){
                    Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Update Akun Pegawai",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    this.form.reset();
                    $("#tambahgolongan").modal("hide");
                    this.allgolongan()
                }
            

           })
        },
        addgolongan() {
            this.$axios.get('/sanctum/csrf-cookie').then(response => {
            this.form.post('/api/tambahgolongan', {
                headers : { Authorization: "Bearer " + this.token },
            }).then((response) => {
                if (response.data.success){
                    Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Menambahkan Golongan",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    this.form.reset();
                    $('#tambahgolongan').modal('hide')
                    this.allgolongan()
                }
                    
                    }
                )
                    })
        },
         allgolongan(){
            this.$axios.get('/sanctum/csrf-cookie').then(response => {
            this.$axios.get('/api/allgolongan',{
                headers: {Authorization: "Bearer " + this.token},
            })
                .then(response => {
                    this.golongan = response.data.data;
                })
                .catch(function (error) {
                    console.error(error);
                });
        })
        },
         hapusgolongan(id){
            this.$axios.get('/sanctum/csrf-cookie').then(response => {
            Swal.fire({
            title: 'Hapus Golongan ?',
            text: "Anda tidak akan bisa mengembalikannya lagi!",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#1BC5BD',
            cancelButtonColor: '',
            confirmButtonText: 'Hapus',
            cancelButtonText: 'Batal',
            }).then((result) => {
                 if (result.isConfirmed) {
                 axios.delete('/api/hapusgolongan/'+id,  {
                headers: { Authorization: "Bearer " + this.token },
                },
                )
                  Swal.fire({
                        icon: "success",
                        title: "Berhasil",
                        text: "Berhasil Menghapus Golongan Pegawai",
                        showConfirmButton: false,
                        timer: 1600,
                    })
                    };
           
                    this.allgolongan()

            },

            )

            })
        },

          convertToRupiah(value) {
            // value = value.toString()
            value = parseFloat(value)
            let rupiah = ''
            let valueRev = value.toString().split('').reverse().join('')
            for (let i = 0; i < valueRev.length; i++) {
                if (i % 3 === 0) rupiah += `${valueRev.substr(i, 3)}.`
            }

            const rp = rupiah
                .split('', rupiah.length - 1)
                .reverse()
                .join('')
            // console.log('rupiah', isNaN(rp), rupiah.length, rp, rupiah)
            if (rupiah === 'NaN.' || rupiah === 'NaN') {
                return '...'
            }
            return `Rp ${rp}`
        },
       


        
    },
     created() {
    },

    mounted () {
            this.riwayat();
            this.alltunjangan();
            this.allgolongan();
            this.allpotongan();
            this.allbonus();
            this.getpt();
            this.tampilgaji();
            this.allJabatan();
            this.getdataPegawai();
    }


}


</script>

<style scope>
    .menugaji {
        width: 100vw;
        background-color: white;
        border: none;
        height: 57px;
        place-content: center;
        display: flex;
        justify-content: center;

    }
    
    .menunya {
        width: 350px;
        height: 200px;
        color: #E95A09;
        border: none;
        border-radius: 17px;
        background: #FFFFFF;
        box-shadow: 0px 10px 20px rgba(0, 0, 0, 0.20);
        transition: ease-out 0.3s;
    }
    
    .menunya:hover {
        background-color: #E95A09;
        color: white;
        outline: none;
    }
    .menunya.active {
        background-color: #E95A09;
        color: white;
        outline: none;
        transition: background-color 0.5s ease-out 0.3s;
    }
    .tab-content .tab-pane {
        display: none;
    }
    
    .tab-content .tab-pane.active {
        display: block;
    }
</style>


